{"version":1,"patch":{"id":"897f03f5-bac1-4c6f-b5bb-7e2fd2a42c92","pan":{"x":-26.53259,"y":951.78448},"zoom":0.36946,"nodes":[{"type":"FeedbackDelay","id":"58926a9f-962a-4aa1-a30c-a623ad848a1d","position":{"x":-71.33594,"y":23.1875}},{"type":"Text","id":"5ebfa96e-3756-477b-b535-4d01688d5059","position":{"x":-48.66406,"y":99.1875},"text":"This is the FeedbackDelay node","width":256.0},{"type":"Text","id":"4d969cc1-0114-447c-a576-00510ad24fd3","position":{"x":-83.875,"y":-17.3125},"text":"The FeedbackDelay node is not a \"delay\" effect.","width":256.0},{"type":"Delay","id":"e8b534a9-b683-46b1-93f7-0808fa3fdfd6","position":{"x":-54.48828,"y":-291.52734},"time":{"value":0.5,"min":0.0,"max":1.0},"feedback":{"value":0.0,"min":0.0,"max":1.0},"mix":{"value":0.5,"min":0.0,"max":1.0}},{"type":"Text","id":"2742fad8-a06c-4e9f-a00d-046b3ddf00ea","position":{"x":-83.79688,"y":-340.16016},"text":"The FeedbackDelay node only works when in a feedback configuration, like this below:","width":256.0},{"type":"Trigger","id":"2dd18af0-34b6-4970-be69-50477bae34e2","position":{"x":-185.68175,"y":-464.05414},"toggle":false,"state":false},{"type":"Value","id":"84bdb837-9e2f-4e73-992e-aa64e1167f9e","position":{"x":132.61403,"y":-495.91089}},{"type":"Expr","id":"4141ed76-7f8b-4557-80ca-63f99ec01eba","position":{"x":-26.9533,"y":-601.71637},"expr":"1-x"},{"type":"FeedbackDelay","id":"bd3ba6f1-3c06-439b-ab96-0d41783ab4ac","position":{"x":-51.50083,"y":-550.57489}},{"type":"Sample & Hold","id":"3f062c04-9cb7-4603-86c4-ce2802d44569","position":{"x":-51.34871,"y":-496.28564}},{"type":"Text","id":"2ff01715-9298-418c-8fc8-b362e6efea3b","position":{"x":-230.23637,"y":-522.65155},"text":"The \"z\" inside the node's input indicates where the feedback delay happens.","width":183.94878},{"type":"Value","id":"39c238e8-1767-4dfd-9367-69bb6292a3b5","position":{"x":499.58798,"y":-993.29871}},{"type":"Text","id":"d1a4e08b-f945-49a1-8f05-ec7c6d686ca1","position":{"x":279.27536,"y":-1401.35498},"text":"Chunk 2 Module Output: 1","width":334.34818},{"type":"Text","id":"30054e7b-e125-4a24-ac6f-2af9dc3cb72a","position":{"x":225.7352,"y":-1447.31433},"text":"3rd Chunk: The Signal input changes from 2 to 3.  The Feedback Delay node releases the Sample signal. Audulus calculates the inequality.  The inequality is still true because the Sample (1) and the Signal (3) are still different.  The Sample & Hold node retains the same sample.  The Feedback Delay node halts the output value until the next chunk.","width":334.34818},{"type":"Value","id":"5ef1097f-4382-4be8-88e7-7093e2c40651","position":{"x":498.47983,"y":-946.86462}},{"type":"Text","id":"b2313937-e336-4dee-804c-1032cf0a2746","position":{"x":221.59512,"y":-1283.35925},"text":"2nd Chunk: The Signal input changes from 1 to 2.  The Feedback Delay node releases the Sample signal.  Audulus calculates the inequality.  The inequality is still true because the Sample (1) and the Signal (2) are still different.  The Sample & Hold node retains the same sample.  The Feedback Delay node halts the output value until the next chunk.","width":334.34818},{"type":"Text","id":"fa9a8fe4-e897-48ae-affb-3a309d6540c1","position":{"x":-416.41763,"y":-1623.73047},"text":"Chunk 3 Module Output: 1","width":334.34818},{"type":"Light","id":"0b446c5d-2bad-47b9-9a26-1a691c955cec","position":{"x":503.51791,"y":-1050.76086}},{"type":"Text","id":"9b08226c-b073-47d1-9e3d-b53a04100929","position":{"x":-467.94443,"y":-1669.48718},"text":"4th chunk: The Signal input stays at 3.  The Feedback Delay node releases the 1 and the trigger of the Sample & Hold node goes high.  The Sample & Hold captures the signal input and holds the value at its output.  Audulus calculates the inequality again.  The Signal and Sample match, so the inequality outputs a 0.  The Feedback Delay node halts the value until the next chunk.","width":334.34818},{"type":"Text","id":"cffcad72-f873-454e-8231-211eef6ca349","position":{"x":-389.37527,"y":-2002.79053},"text":"etc., etc., ...","width":334.34818},{"type":"Text","id":"aefe204b-f5ee-4c21-ace7-7cf83be8e514","position":{"x":-416.07602,"y":-1262.66052},"text":"Chunk 1 Module Output: 1","width":334.34818},{"type":"Value","id":"002e89de-822e-433f-b5d7-5dc9450cab3f","position":{"x":-198.30023,"y":-985.06897}},{"type":"Output","id":"c21c5e6b-5653-4d24-978a-a5cbecd97342","position":{"x":-199.22125,"y":-1071.30566},"name":"","exposedPosition":{"x":-60.0,"y":40.0}},{"type":"Sample & Hold","id":"0d613b11-6a63-4bd9-b455-7e8c6c5238ae","position":{"x":301.05368,"y":-974.63379}},{"type":"Text","id":"30bc67e2-1633-447f-9914-c5d3205189f7","position":{"x":-416.04135,"y":-1463.28857},"text":"Chunk 2 Module Output: 0","width":334.34818},{"type":"Text","id":"5011d892-5f59-4e66-a9f3-53418d74cdef","position":{"x":219.13004,"y":-1136.276},"text":"1st chunk: The Signal input changes from 0 to 1.  Audulus calculates the inequality between the Signal and Sample inputs.  The values are different so the output is 1.  The output triggers the Sample & Hold node.  The Sample & Hold node captures the Signal input value and holds it at its output.  The Feedback Delay node halts the value until the next chunk.","width":334.34818},{"type":"Text","id":"b5f72597-66db-4c16-ad7b-07fd196dc61d","position":{"x":-472.07614,"y":-1146.86658},"text":"1st chunk: The Signal input changes from 0 to 1.  Audulus calculates the inequality between the Signal and Sample inputs.  The values are different so the output is 1.  The Feedback Delay node is between the output and the Sample & Hold trigger.  It prevents the inequality from triggering the node during this chunk.","width":334.34818},{"type":"Text","id":"805c175a-1c69-4862-89e9-bd2050188cac","position":{"x":-42.77505,"y":-962.646},"text":"Signal","width":301.3808},{"type":"Text","id":"8131d60f-68bd-461d-bd16-2cb5affcbb2e","position":{"x":657.36511,"y":-926.47876},"text":"Sample","width":301.3808},{"type":"Text","id":"913734af-3e95-4ad6-a125-7f3bdd87aa02","position":{"x":281.85416,"y":-1574.07654},"text":"Chunk 3 Module Output: 1","width":334.34818},{"type":"Text","id":"2bc26180-d7ca-4980-8e81-0cf796e5b38f","position":{"x":-48.35022,"y":-920.61682},"text":"Sample","width":301.3808},{"type":"Light","id":"fc5dbf62-18b0-498e-825b-6f7c62946eff","position":{"x":-196.2525,"y":-1029.77942}},{"type":"Text","id":"e658ebb4-62a6-46b9-b412-009d36bc0f36","position":{"x":283.87253,"y":-1243.82288},"text":"Chunk 1 Module Output: 1","width":334.34818},{"type":"Expr","id":"58a5f853-16fd-454f-b426-330f7a79a6c4","position":{"x":-435.62167,"y":-1085.91882},"expr":"Signal!=Sample"},{"type":"Value","id":"a07bce27-c159-49bc-9bc6-068e699ebaf4","position":{"x":-199.25119,"y":-942.11694}},{"type":"Text","id":"ac9d877e-f8fa-4896-a935-78786beab91f","position":{"x":-472.78561,"y":-1304.62012},"text":"2nd chunk: The Signal input changes from 1 to 2.  The feedback delay node releases the signal from the inequality.  The output of the inequality from the last chunk triggers the Sample & Hold node.  The Sample & Hold node captures the signal input and holds the value at its output.  Audulus calculates the inequality between the Signal and Sample inputs again.  Both the Signal and Sample match, so the inequality outputs a 0.  Again, the Feedback Delay node halts the value until the next chunk.","width":334.34818},{"type":"Constant","id":"39e4e390-9fc3-4a0a-8936-0b397a76d1e6","position":{"x":140.30368,"y":-1081.40125},"knob":{"value":0.5,"min":0.0,"max":1.0}},{"type":"FeedbackDelay","id":"b8abad16-ab2c-4244-9c46-02202cc07ae4","position":{"x":94.366,"y":-1034.5238}},{"type":"Constant","id":"9d8b4048-e39e-4097-915d-c3acc2b417ac","position":{"x":-644.98175,"y":-985.33203},"knob":{"value":0.5,"min":0.0,"max":1.0}},{"type":"Text","id":"4fcce334-7ce1-4273-8ee2-30d47d754055","position":{"x":-473.16879,"y":-1503.13782},"text":"3rd chunk: The Signal input changes from 2 to 3.  The Feedback Delay node releases the 0 signal and the trigger of the Sample & Hold node goes low.  Audulus calculates the inequality again.  The sampled value from chunk 2 doesn't match the Signal input from chunk 3.  The inequality outputs a 1.  The Feedback Delay node halts the value until the next chunk.","width":334.34818},{"type":"Text","id":"24ded3ae-2c47-4612-adec-622c035b2e65","position":{"x":658.12073,"y":-969.4303},"text":"Signal","width":301.3808},{"type":"Expr","id":"efa08963-b63d-43b9-a4e9-a0332b2e8dec","position":{"x":274.66519,"y":-1065.01428},"expr":"Signal!=Sample"},{"type":"Text","id":"62755388-2fc4-4055-a03c-fa4e5aeca131","position":{"x":-109.26804,"y":-822.19104},"text":"For this module to be useful, it needs to output both an on and an off signal.  If the signal just goes on an stays on, it only detected the first change, but no subsequent changes.","width":323.03412},{"type":"Text","id":"d1a8a719-32b0-4544-b997-71372848cb5f","position":{"x":323.04459,"y":-1642.09155},"text":"etc., etc., ...","width":334.34818},{"type":"Text","id":"50fbd96a-d8b3-4eda-8f45-40d4757c6e27","position":{"x":-467.53793,"y":-1850.75745},"text":"5th Chunk: The Signal input stays at 3.  The Feedback Delay node releases the 0 and the trigger of the Sample & Hold node goes low.  Audulus calculates the inequality again.  The Signal and Sample match, so the inequality outputs a 0.","width":334.34818},{"type":"Sample & Hold","id":"eafc423f-a995-4354-96bf-ae82e48249d7","position":{"x":-424.6315,"y":-962.1095}},{"type":"Text","id":"a6da2f5e-332f-4326-b0f2-3239b8e76d9b","position":{"x":-414.12277,"y":-1941.35754},"text":"Chunk 5 Module Output: 0","width":334.34818},{"type":"Text","id":"9ce8f858-0d0d-4e7d-99b8-f50395a16127","position":{"x":-413.44168,"y":-1801.7384},"text":"Chunk 4 Module Output: 0","width":334.34818},{"type":"FeedbackDelay","id":"755ad8c0-b770-49cd-a295-8db1be679060","position":{"x":-424.0939,"y":-1008.30359}},{"type":"Text","id":"fd6b6cf8-c79e-4bec-9913-3f7aa16d449e","position":{"x":-106.08293,"y":-711.15875},"text":"Unless Audulus is in single-sample feedback mode, it processes feedback data in chunks.  Each chunk represents a certain number of samples.  During each chunk, a node will perform a calculation based on its input and send that input to its output.  On the left is the correct design and on the right is the incorrect design.  The description of what's happening chunk-by-chunk might be a little tedious.  If you understand it, though, you'll see why the Feedback Delay node needs to be where it is.","width":323.03412},{"type":"Text","id":"53368e5c-3648-4a72-951c-2eef4c62597d","position":{"x":-104.31697,"y":-658.64368},"text":"To illustrate the importance of the FeedbackDelay node, refer to this case study with a change detector module.","width":323.03412}],"wires":[{"from":"3f062c04-9cb7-4603-86c4-ce2802d44569","output":0,"to":"84bdb837-9e2f-4e73-992e-aa64e1167f9e","input":0},{"from":"bd3ba6f1-3c06-439b-ab96-0d41783ab4ac","output":0,"to":"4141ed76-7f8b-4557-80ca-63f99ec01eba","input":0},{"from":"3f062c04-9cb7-4603-86c4-ce2802d44569","output":0,"to":"bd3ba6f1-3c06-439b-ab96-0d41783ab4ac","input":0},{"from":"4141ed76-7f8b-4557-80ca-63f99ec01eba","output":0,"to":"3f062c04-9cb7-4603-86c4-ce2802d44569","input":0},{"from":"2dd18af0-34b6-4970-be69-50477bae34e2","output":0,"to":"3f062c04-9cb7-4603-86c4-ce2802d44569","input":1},{"from":"39e4e390-9fc3-4a0a-8936-0b397a76d1e6","output":0,"to":"39c238e8-1767-4dfd-9367-69bb6292a3b5","input":0},{"from":"0d613b11-6a63-4bd9-b455-7e8c6c5238ae","output":0,"to":"5ef1097f-4382-4be8-88e7-7093e2c40651","input":0},{"from":"efa08963-b63d-43b9-a4e9-a0332b2e8dec","output":0,"to":"0b446c5d-2bad-47b9-9a26-1a691c955cec","input":0},{"from":"9d8b4048-e39e-4097-915d-c3acc2b417ac","output":0,"to":"002e89de-822e-433f-b5d7-5dc9450cab3f","input":0},{"from":"58a5f853-16fd-454f-b426-330f7a79a6c4","output":0,"to":"c21c5e6b-5653-4d24-978a-a5cbecd97342","input":0},{"from":"39e4e390-9fc3-4a0a-8936-0b397a76d1e6","output":0,"to":"0d613b11-6a63-4bd9-b455-7e8c6c5238ae","input":0},{"from":"efa08963-b63d-43b9-a4e9-a0332b2e8dec","output":0,"to":"0d613b11-6a63-4bd9-b455-7e8c6c5238ae","input":1},{"from":"58a5f853-16fd-454f-b426-330f7a79a6c4","output":0,"to":"fc5dbf62-18b0-498e-825b-6f7c62946eff","input":0},{"from":"9d8b4048-e39e-4097-915d-c3acc2b417ac","output":0,"to":"58a5f853-16fd-454f-b426-330f7a79a6c4","input":0},{"from":"eafc423f-a995-4354-96bf-ae82e48249d7","output":0,"to":"58a5f853-16fd-454f-b426-330f7a79a6c4","input":1},{"from":"eafc423f-a995-4354-96bf-ae82e48249d7","output":0,"to":"a07bce27-c159-49bc-9bc6-068e699ebaf4","input":0},{"from":"0d613b11-6a63-4bd9-b455-7e8c6c5238ae","output":0,"to":"b8abad16-ab2c-4244-9c46-02202cc07ae4","input":0},{"from":"39e4e390-9fc3-4a0a-8936-0b397a76d1e6","output":0,"to":"efa08963-b63d-43b9-a4e9-a0332b2e8dec","input":0},{"from":"b8abad16-ab2c-4244-9c46-02202cc07ae4","output":0,"to":"efa08963-b63d-43b9-a4e9-a0332b2e8dec","input":1},{"from":"9d8b4048-e39e-4097-915d-c3acc2b417ac","output":0,"to":"eafc423f-a995-4354-96bf-ae82e48249d7","input":0},{"from":"755ad8c0-b770-49cd-a295-8db1be679060","output":0,"to":"eafc423f-a995-4354-96bf-ae82e48249d7","input":1},{"from":"58a5f853-16fd-454f-b426-330f7a79a6c4","output":0,"to":"755ad8c0-b770-49cd-a295-8db1be679060","input":0}]}}